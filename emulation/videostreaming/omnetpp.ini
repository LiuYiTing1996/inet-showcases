[General]
scheduler-class = "inet::RealTimeScheduler"
sim-time-limit = 1000s

# except for VideoStreaming4
# vlc -vvv https://www.youtube.com/watch?v=Z_T5FAZjMEI --sout '#transcode{vcodec=h264,acodec=mpga,vb=500k,ab=128k,deinterlace,scale=0.25}:rtp{mux=ts,dst=10.1.1.3,port=4004}'

# lower bitrate
# vlc -vvv https://www.youtube.com/watch?v=Z_T5FAZjMEI --sout '#transcode{vcodec=h264,acodec=mpga,vb=125k,ab=64k,deinterlace,scale=0.25,threads=2}:rtp{mux=ts,dst=10.1.1.3,port=4004}'

**.*Host.udp.crcMode = "computed"
**.host.udp.crcMode = "computed"
**.ipv4.**.crcMode = "computed"

*.visualizer.*.interfaceTableVisualizer.displayInterfaceTables = true
*.visualizer.*.interfaceTableVisualizer.nodeFilter = "not switch"

#*.visualizer.*.routingTableVisualizer.displayRoutingTables = true

[Config VideoStreaming]
network = VideoStreamingShowcase

*.*Host.numExtInterfaces = 1

*.incomingHost.ext[*].ext.device = "eth0"
*.incomingHost.ext[*].ext.filterString = "udp and ip dst host 10.1.1.3"
*.incomingHost.ext[*].ext.mtu = 1500B

*.outgoingHost.ext[*].ext.device = "eth0"
*.outgoingHost.ext[*].ext.filterString = "udp and ip src host 10.1.1.2"
*.outgoingHost.ext[*].ext.mtu = 1500B

*.outgoingHost.numApps = 1

*.outgoingHost.app[0].typename = "UdpForwardApp"
*.outgoingHost.app[0].localPort = 4004
*.outgoingHost.app[0].destAddress = "192.168.1.52"
*.outgoingHost.app[0].destPort = 5005

*.configurator.config = xmldoc("config.xml")

**.forwarding = true
**.proxyARP = true



[Config VideoStreamingForward]
network = VideoStreamingShowcase

*.*Host.numExtInterfaces = 1

*.incomingHost.ext[*].ext.device = "eth0"
*.incomingHost.ext[*].ext.filterString = "udp and ip dst host 10.1.1.2"
*.incomingHost.ext[*].ext.mtu = 1500B

*.outgoingHost.ext[*].ext.device = "eth0"
*.outgoingHost.ext[*].ext.filterString = "udp and ip src host 10.1.1.2"
*.outgoingHost.ext[*].ext.mtu = 1500B

*.outgoingHost.numApps = 1

*.outgoingHost.app[0].typename = "UdpForwardApp"
*.outgoingHost.app[0].localPort = 4000
*.outgoingHost.app[0].destAddress = "192.168.1.52"
*.outgoingHost.app[0].destPort = 5005



*.incomingHost.numApps = 1

*.incomingHost.app[0].typename = "UdpForwardApp"
*.incomingHost.app[0].localPort = 4004
*.incomingHost.app[0].destAddress = "10.1.1.3"
*.incomingHost.app[0].destPort = 4000




*.configurator.config = xmldoc("config.xml")

[Config VideoStreaming3]
network = VideoStreamingShowcase
description = "incomingHost routes UDP packets to outgoingHost, which performs NAT"

*.*Host.numExtInterfaces = 1

*.incomingHost.ext[*].ext.device = "eth0"
*.incomingHost.ext[*].ext.filterString = "udp and ip dst host 10.1.1.3"
#*.incomingHost.ext[*].ext.mtu = 1500B

*.outgoingHost.ext[*].ext.device = "eth0"
*.outgoingHost.ext[*].ext.filterString = "udp and ip src host 10.1.1.99"
#*.outgoingHost.ext[*].ext.mtu = 1500B

*.outgoingHost.numApps = 1

*.outgoingHost.app[0].typename = "UdpForwardApp"
*.outgoingHost.app[0].localPort = 4004
*.outgoingHost.app[0].destAddress = "192.168.1.52"
*.outgoingHost.app[0].destPort = 5005

# assign addresses to eth and ext interfaces, in outgoingHost, route packets sent to real eth0 via ext interface
*.configurator.config = xmldoc("config2.xml")

**.forwarding = true

**.arp.typename = "GlobalArp"

[Config VideoStreaming4]
network = VideoStreamingShowcase
description = "both hosts have a UdpForwardApp, both perform NAT"

# vlc -vvv https://www.youtube.com/watch?v=Z_T5FAZjMEI --sout '#transcode{vcodec=h264,acodec=mpga,vb=500k,ab=128k,deinterlace,scale=0.25}:rtp{mux=ts,dst=10.1.1.2,port=4004}'

*.*Host.numExtInterfaces = 1

*.incomingHost.ext[*].ext.device = "eth0"
*.incomingHost.ext[*].ext.filterString = "udp and ip dst host 10.1.1.2"
*.incomingHost.ext[*].ext.mtu = 1500B

*.outgoingHost.ext[*].ext.device = "eth0"
*.outgoingHost.ext[*].ext.filterString = "udp and ip src host 10.1.1.2"
*.outgoingHost.ext[*].ext.mtu = 1500B

*.outgoingHost.numApps = 1

*.outgoingHost.app[0].typename = "UdpForwardApp"
*.outgoingHost.app[0].localPort = 4000
*.outgoingHost.app[0].destAddress = "192.168.1.52"
*.outgoingHost.app[0].destPort = 5005



*.incomingHost.numApps = 1

*.incomingHost.app[0].typename = "UdpForwardApp"
*.incomingHost.app[0].localPort = 4004
*.incomingHost.app[0].destAddress = "10.1.1.3"
*.incomingHost.app[0].destPort = 4000




*.configurator.config = xmldoc("config.xml")


[Config VideoStreaming5]
network = VideoStreamingShowcaseOneHost
description = "just one host, performs NAT"

*.host.numExtInterfaces = 1

*.host.ext[*].ext.device = "eth0"
*.host.ext[*].ext.filterString = "udp and ip dst host 10.1.1.3"
*.host.ext[*].ext.mtu = 1500B

*.host.numApps = 1

*.host.app[0].typename = "UdpForwardApp"
*.host.app[0].localPort = 4004
*.host.app[0].destAddress = "192.168.1.52"
*.host.app[0].destPort = 5005

# assign addresses to eth and ext interface, route packets sent to real eth0 via ext interface
*.configurator.config = xmldoc("config3.xml")

*.visualizer.*.interfaceTableVisualizer.displayInterfaceTables = true

**.forwarding = true

[Config Videostreaming6]
network = VideoStreamingShowcaseNoSwitch
extends = VideoStreaming3
description = "incomingHost routes UDP packets to outgoingHost, which performs NAT; hosts are connected directly, without using a switch"

[Config VideoStreaming7]
extends = VideoStreaming3
description = "incomingHost routes UDP packets to outgoingHost, which performs NAT; multiple configs with different packet error rate of the ethernet connection"

*.incomingHost.ethg$o[0].channel.per = ${per=0,0.01,0.05,0.1,0.25,0.5,0.75,0.95}

[Config TestSwitch]
network = SwitchWithExtInterfaceTest

*.switch.numExtInterfaces = 1

*.switch.ext[0].ext.device = "eth0"
*.switch.ext[*].ext.filterString = "udp and ip dst host 10.1.1.3"
*.switch.ext[*].ext.mtu = 1500B